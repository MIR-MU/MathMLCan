<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<article>
    <articleinfo>
        <title>Závěrečná zpráva - Jakub Adler</title>
    </articleinfo>
        <para>Mým úkolem na projektu <emphasis>MathMLCan: Kanonizace
        MathML</emphasis> bylo implementovat modul
        <emphasis>MrowNormalizer</emphasis> a napsat pro něj testy.
        </para>
    <section>
        <title>Implementace modulu MrowNormalizer</title>
        <para>MrowNormalizer je modul typu DOM, tedy zpracovává dokument pomocí
        JDOM2 API. Úkolem modulu je
            <itemizedlist>
                <listitem>
                    <para>odstranit element <emphasis>mrow</emphasis> tam
                    kde není nutný</para>
                </listitem>
                <listitem>
                    <para>detekovat výrazy ohraničené závorkami a obalit
                    je vně i zevnitř elementem <emphasis>mrow</emphasis></para>
                </listitem>
            </itemizedlist>
        </para>
        <para>Účelem přidávání elementů <emphasis>mrow</emphasis> je převést
        všechny výskyty uzávorkovaných výrazů zapsaných přímo pomocí symbolů
        závorek uvnitř elementů <emphasis>mo</emphasis> do formátu jaký generuje
        modul <emphasis>MfencedReplacer</emphasis>. To znamená že je potřeba ke
        každé otevírající závorce najít příslušnou uzavírající závorku, všechny
        elementy mezi nimi vložit do elementu <emphasis>mrow</emphasis> a tento
        element spolu se závorkami vložit do dalšího <emphasis>mrow</emphasis>
        (pokud tam již takový <emphasis>mrow</emphasis> není). V konfiguraci lze
        nastavit jaké symboly jsou považovány za otevírací a uzavírací
        závorky a dále také vypnout vkládání vnitřních či vnějších elementů
        <emphasis>mrow</emphasis> aby bylo možné nakonfigurovat
        <emphasis>MrowNormalizer</emphasis> stejně jako
        <emphasis>MfencedReplacer</emphasis> s jehož výstupem se má shodovat.
        </para>
        <para>
        Elementy <emphasis>mrow</emphasis> které mají jedno nebo žádné dítě je
        možné rovnou odstranit. Jinak rozhoduje povinný počet dětí rodičovského
        elementu definovaný pro každý
        element ve specifikaci MathML. Pokud rodičovský element může obsahovat
        jedno nebo více dětí, může se <emphasis>mrow</emphasis> odstranit. Jinak
        se porovnává specifikací určený počet dětí rodiče s počtem dětí, které
        by obsahoval po odstranění elementu <emphasis>mrow</emphasis> a pokud se
        rovnají je možné <emphasis>mrow</emphasis> odstranit. Počty dětí pro
        různé elementy MathML je možné nastavit v konfiguraci. Výchozí hodnoty
        odpovídají kapitole 3.1.3 MathML 3.0 W3C Recommendation.
        </para>
        <para>Odstraňování i přidávání probíhá v jednom průchodu
        dokumentem. Dokument se prochází do hloubky; pokud je zpracovávaný
        element <emphasis>mrow</emphasis> tak se zkusí odstranit, pokud ne,
        testuje se, jestli je element otevírací závorkou.
        </para>
    </section>
</article>
